<% db_version_str = ActiveRecord::Base.connection.select_value('SELECT version()') %>
<% db_version_match = db_version_str.match(/PostgreSQL ([\d.]+)/) %>
<% db_version = db_version_match ? db_version_match[1] : db_version_str %>
<% content_for(:title, "Narratree - About") %>

<%= render partial: "shared/section_container", locals: {
    style: "width: fit-content;",
    header: content_tag(:h2, "About Narratree"),
    body: content_tag(:div, style: "display: flex; flex-direction: column; align-items: center; width: 100%;") do
        content_tag(:div, style: "max-width: 700px; width: 100%; text-align: left;") do
            safe_join([
                image_tag(asset_path('default/logo.png'), alt: 'Logo', style: 'display: block; margin-left: auto; margin-right: auto; width: 150px; height: auto;'),
                image_tag(asset_path('spooky/logo-halloween.png'), alt: 'Halloween Logo', style: 'display:none; margin-left: auto; margin-right: auto; width: 150px; height: auto;'),
                image_tag(asset_path('christmas/logo-christmas.png'), alt: 'Christmas Logo', style: 'display:none; margin-left: auto; margin-right: auto; width: 150px; height: auto;'),
                content_tag(:p, "This is a publishing site where you can post articles and browse other users' articles. This is the first version of the site so do understand there WILL be bugs. I'm still ironing out the issues."),
                content_tag(:p, "On The Odin Project, a person can start with little to no background of programming and work their way up to getting hired as a Software Engineer!"),
                content_tag(:p, "This project was built using The Odin Project. In a little over a month, I went from knowing absolutely zero about web development to hosting a fully featured publishing site!"),
                content_tag(:p, "Also, please understand that until the site gets more stable and most of the bugs are fixed,"),
                content_tag(:p, "this site will be on the free tier of Render (the service that is hosting the site). This means access will be slow at times and certain things either will not work or take longer to fix."),
                content_tag(:p, "As the site gets more traction, I will upgrade to one of the paid tiers."),
                content_tag(:p, ""),
                tag.hr,
                content_tag(:div, style: "display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 16px; font-size: 0.9em;") do
                    safe_join([
                        content_tag(:div, "Ruby version: #{RUBY_VERSION}", style: "font-size: 0.8em;"),
                        content_tag(:div, "Database: PostgreSQL #{db_version}", style: "font-size: 0.8em;"),
                        content_tag(:div, "Rails version: Rails #{Rails.version}", style: "font-size: 0.8em;"),
                        content_tag(:div, "Hosted on: Render.com", style: "font-size: 0.8em;")
                    ])
                end
            ])
        end
    end
} %>