<%= render partial: "shared/section_container", locals: {
  header: content_tag(:h2, "User Settings"),
  body: content_tag(:div, style: "display: flex; flex-direction: column; align-items: center; width: 100%;") do
    content_tag(:div, style: "max-width: 700px; width: 100%; text-align: left;") do
      form_with(model: @user, url: settings_path, method: :patch, local: true) do |f|
        safe_join([
          content_tag(:fieldset) do
            safe_join([
              content_tag(:legend, "Email Notifications"),
              content_tag(:p, "Email when:"),
              safe_join(User::EMAIL_NOTIFICATION_OPTIONS.map do |key, label|
                content_tag(:div) do
                  check_box_tag("user[email_notification_preferences][#{key}]", true, @user.email_notification_enabled?(key), id: "user_email_notification_preferences_#{key}") +
                  label_tag("user_email_notification_preferences_#{key}", label)
                end
              end)
            ])
          end,
          content_tag(:div, style: "margin-top: 1em;", class: "form-group") do
            f.submit('Save Settings', class: 'form-submit-button')
          end
        ])
      end
    end
  end
} %>
