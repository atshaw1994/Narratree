<!DOCTYPE html>
<html style="height: 100%;">
  <head>
    <title><%= content_for(:title) || "Narratree" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <%= favicon_link_tag 'favicon.png' %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= yield :head %>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body data-controller="login-modal" style="min-height: 100vh; display: flex; flex-direction: column;">
    <div id="site-header-area" data-controller="mobile-menu">
      <%= render 'layouts/mobile_sidebar' %>
      <%= render 'layouts/header' %>
    </div>
    <div class="flash-messages">
      <p><%= notice %></p>
      <p><%= alert %></p>
    </div>
    <div class="body-content" style="flex: 1 0 auto; margin-top: 72px;">
      <%= yield %>
    </div>
    <footer class="site-footer footer mt-5 py-3 text-center">
      <div class="container">
        <a href="<%= guidelines_path %>">Community Guidelines</a>
        <p style="margin-top: 12px;"> &copy; <%= Time.current.year %> Narratree. All rights reserved.</p>
      </div>
    </footer>
    <div id="login-modal" class="modal" data-login-modal-target="modal">
      <div class="modal-content">
        <%= render partial: 'shared/section_container', locals: {
          header: (
            '<h2>Log In</h2>' \
            '<span class="close-button" data-action="click->login-modal#hide">&times;</span>'
          ).html_safe,
          body: render('devise/sessions/login_form', resource: User.new, resource_name: :user, devise_mapping: Devise.mappings[:user])
        } %>
      </div>
    </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@rails/ujs@7.1.0/dist/rails-ujs.js"></script>
  </body>
</html>
