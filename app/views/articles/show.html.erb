<div class="article-title">
  <h1><%= @article.title %></h1>
  <p><em>Written by <%= @article.author.presence || 'Unknown' %></em></p>
</div>

<div class="article-body">
  <p><%= @article.body %></p>
</div>

<div class="article-btn-container">
  <%= link_to edit_article_path(@article), class: "article-btn" do %>
    <span class="material-symbols-outlined edit-icon">
      edit
    </span>
  <% end %>

  <button type="button" class="article-btn" id="toggle-comments-btn">
    <span class="material-symbols-outlined comment-icon">
      message
    </span>
  </button>

  <%= link_to article_path(@article), class: "article-btn", data: {
    turbo_method: :delete,
    turbo_confirm: "Are you sure?"
  } do %>
    <span class="material-symbols-outlined delete-icon">
      delete
    </span>
  <% end %>
</div>

<div class="comments-section" id="comments-section" style="display:none;">
  <h2>Comments</h2>
  <%= render "comments/form", article: @article %>
  <%= render @article.comments %>
</div>
<%= javascript_tag do %>
  document.addEventListener("turbo:load", function() {
    var btn = document.getElementById("toggle-comments-btn");
    var section = document.getElementById("comments-section");
    if (btn && section) {
      btn.addEventListener("click", function() {
        if (section.style.display === "none") {
          section.style.display = "";
        } else {
          section.style.display = "none";
        }
      });
    }
  });
<% end %>


