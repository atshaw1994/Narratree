<div class="article-btn-container">
  <button type="button" class="article-btn" id="toggle-comments-btn" title="Toggle Comments">
    <span class="material-symbols-outlined comment-icon">
      message
    </span>
  </button>
  
  <% if current_user %>
    <% if @article.user == current_user %>
      <%= link_to edit_article_path(@article), class: "article-btn", title: "Edit Article" do %>
        <span class="material-symbols-outlined edit-icon">edit</span>
      <% end %>
      <%= link_to article_path(@article), class: "article-btn", title: "Delete Article", data: {
        turbo_method: :delete,
        turbo_confirm: "Are you sure?"
      } do %>
        <span class="material-symbols-outlined delete-icon">delete</span>
      <% end %>
    <% end %>
  <% end %>
</div>

<div class="article-title">
  <h1><%= @article.title %></h1>
  <p><em>Written by <%= @article.user&.username || 'Unknown' %></em></p>
</div>

<div class="article-body">
  <p><%= @article.body %></p>
</div>

<div class="comments-section" id="comments-section" style="display:none;">
  <%= render "comments/form", article: @article, comment: @comment %>
  
  <%= render @article.comments.select(&:body) %>
</div>
<%= javascript_tag do %>
  document.addEventListener("turbo:load", function() {
    var btn = document.getElementById("toggle-comments-btn");
    var section = document.getElementById("comments-section");
    if (btn && section) {
      btn.addEventListener("click", function() {
        if (section.style.display === "none") {
          section.style.display = "";
        } else {
          section.style.display = "none";
        }
      });
    }
  });
<% end %>
